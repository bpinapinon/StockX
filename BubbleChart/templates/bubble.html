<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Bubble Chart</title>
      <!-- Plotly Dependencies -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.5.0/d3.min.js"></script>

    <!-- Bootstrap core CSS -->
  <!-- <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet"> -->

   <!-- Custom styles for this template -->
  <!-- <link href="../css/style.css" rel="stylesheet"> -->
  
</head>
<body id="page-top">

       <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
    <div class="container">
      <a class="navbar-brand js-scroll-trigger" href="#page-top">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive"
          aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fa fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="/">HOME</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="/bubble">Bubble Plot</a>
            </li>
          </ul>
        </div>
      </div>
  </nav>
  <div class="container text-center">
    <h1 class="jumbotron">Bubble Chart</h1>
        <div>
          <div id="bubble"></div>
          <!-- <table id="contents" style="width:100%; height:400px;" border></table> -->
          <!-- <script src="{{ url_for('static', filename='bubble.js') }}"></script> -->
            <!-- <script src="../static/bubble.js"></script> -->
            <script>

              var url = "/bubbledata";
              function buildPlot() {
                d3.json(url).then(function(response) {

                console.log(response)
                              
                var sneakers = [response];
                console.log(sneakers)
                
                var trace = {
                    mode: "markers",
                    type: "scatter",
                    x: sneakers.map(sneaker => sneaker.retailPrice),
                    y: sneakers.map(sneaker => sneaker.avgSalePrice), 
                    hovertext: sneakers.map(sneaker => sneaker.brand),
                    marker: {
                    size: sneakers.map(sneaker => sneaker.noSales),
                    color: sneakers.map(sneaker => sneaker.color),
                    sizemode:'area'
                      }
                  };
                
                var data = [trace];
                
                var layout = {
                    title: "Bubble Plot",
                    xaxis: {title: "Retail Price ($)"},
                    yaxis: {title: "Average Sale Price ($)"},
                    hovermode: "closest"
                };
                
              Plotly.plot("bubble", data, layout);
              
              });

              }
              buildPlot();

           </script>
        </div>
  </div>
   
    
</body>
</html>